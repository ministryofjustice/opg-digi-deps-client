{% set translationDomain = "report-bank-accounts" %}
{% trans_default_domain translationDomain %}

<div class="grid-row push--top">
    <div class="column-half">
        <h2 class="heading-medium flush--ends">List of accounts</h2>
    </div>
    <div class="column-half text--right">
        <a href="{{ path('bank_accounts_step' , {'reportId': report.id, 'step': 1}) }}"
           class="bold-small move-quarter--up action-link behat-link-add">
            <span class="icon icon-plus"></span>
            Add account
        </a>
    </div>
</div>

<dl class="govuk-summary-list behat-region-list-accounts">
    <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
            Account
        </dt>
        <dd class="govuk-summary-list__key text--right">
            Balance on {{ report.startDate | date("j F Y") }}
        </dd>
        <dd class="govuk-summary-list__key text--right">
            Balance on {{ report.endDate | date("j F Y") }}
        </dd>
        <dd class="govuk-summary-list__actions">
            <span class="visually-hidden">{{ 'actions' | trans({}, 'common') }}</span>
        </dd>
    </div>
    {% for account in report.bankAccounts %}
        <div class="govuk-summary-list__row behat-region-account-{{ account.accountNumber | behat_namify }}">
            <dt class="govuk-summary-list__value">
                {% if account.requiresBankName %}
                    {{ account.bank }}<br/>
                {% endif %}
                <p class="font-xsmall flush--ends">
                    {{ account.accountTypeText }}<br/>
                    {% if account.requiresSortCode %}
                        Sort code: {{ account.sortCode }}<br/>
                    {% endif %}
                    Account number: ****{{ account.accountNumber }}<br/>
                    Joint account: {{ account.isJointAccount | capitalize }}<br/>
                    Closed: {{ account.isClosed ? 'Yes' : 'No' }}
                </p>
            </dt>
            <dd class="govuk-summary-list__value">
                £{{ account.openingBalance | money_format }}
            </dd>
            <dd class="govuk-summary-list__value numeric-small">
            {% if account.closingBalance == null %}
                <div class="error-message">
                    {{ 'summaryPage.balanceRequired' | trans({ '%date%': report.endDate | date("j F Y") }) }}
                </div>
                <a class="change-answer" href="{{ path('bank_accounts_step' , {'reportId': report.id, 'step': 3, 'accountId': account.id}) }}">
                    {{ 'summaryPage.addBalance' | trans }}
                </a>
            {% else %}
                £{{ account.closingBalance | money_format }}
            {% endif %}
            </dd>
            <dd class="govuk-summary-list__actions soft-half--left hard--right">
                <a class="behat-link-edit govuk-link"
                   href="{{ path('bank_accounts_step' , {'reportId': report.id, 'step': 1, 'accountId': account.id}) }}">{{ 'edit' | trans({}, 'common' ) }}</a>
                <a class="push-half--left behat-link-delete govuk-link"
                   href="{{ path('bank_account_delete' , {'reportId': report.id, 'accountId': account.id}) }}">{{ 'remove' | trans({}, 'common' ) }}</a>
            </dd>
        </div>
    {% endfor %}
</dl>
