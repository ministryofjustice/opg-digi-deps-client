{% set translationDomain = "report-account-form" %}

{{ form_errors_list(form) }}

{{ form_start(form, {attr: {id: 'account-form', novalidate: 'novalidate' } }) }}

    {{ form_input(form.accountType, 'accountForm.accountType') }}
    {{ form_input(form.bank, 'accountForm.bank') }}

    {{ form_input(form.accountNumber, 'accountForm.accountNumber', {
        'inputClass' : 'account-number'
    }) }}
    
    {{ form_sort_code(form.sortCode, 'accountForm.sortCode', {
        'inputType' : 'Number'
    }) }}
    
    <fiedset>
        <legend class="hidden">Joint account</legend>
        {{ form_checkbox_group(form.isJointAccount, 'form.isJointAccount', {
            'fieldSetClass' : 'inline',
            'legendText' : 'accountForm.isJointAccount.label' | trans({}, translationDomain),
            'legendClass' : 'form-label',
            'items': [
                {'labelClass': 'block-label', 'elementClass': '' },
                {'labelClass': 'block-label', 'elementClass': '' }
            ]
        }) }}
    </fieldset>
    
    {{ form_input(form.openingBalance, '', {
        'labelText': 'accountForm.openingBalance.label' | trans({'%startDate%': report.startDate | date("j F Y")}, translationDomain),
        'inputPrefix' : '£',
        'inputClass' : 'form-control__number'
    } ) }}
    {{ form_input(form.closingBalance, 'accountForm.closingBalance', {
        'labelText': 'accountForm.closingBalance.label' | trans({'%endDate%': report.endDate | date("j F Y")}, translationDomain),
        'inputPrefix' : '£',
        'inputClass' : 'form-control__number'
    } ) }}
   
    {% if showIsClosed %}
        {{ form_checkbox(form.isClosed,'accountForm.isClosed', { 
            'labelClass': 'required',
        }) }}
    {% else %}
        {% do form.isClosed.setRendered %}
    {% endif %}
    
    {% include 'AppBundle:Components/ButtonBar:_save_bar.html.twig' with {
    transDomain: translationDomain,
    section: 'account'
    } %}

    {{ form_end(form) }}

{{ form_end(form) }}

<script>
    $('input.form-control__number').on('blur', function (event) {
        GOVUK.formatCurrency(event.target);
    });
</script>


<script type="text/javascript">
$(document).ready(function() {
    
    
    // hide sortcode when account type is "cfo" or "postoffice"
    $('#account_accountType').change(function(event, duration) {
        var duration = typeof duration !== 'undefined' ? duration : 400;
        var bankAndsortCodeBlocks = $('#form-group-account_bank, #form-group-account_sortCode');
        if ($(this).val().match(/^(cfo|postoffice)$/)) {
            bankAndsortCodeBlocks.fadeOut(duration);
        }else {
            bankAndsortCodeBlocks.fadeIn(duration);
        }
    }).trigger('change', [1]);
    
    
    
});
</script>
