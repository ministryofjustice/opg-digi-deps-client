{% if useFormGroup %}
    <div id="form-group-{{ element.vars.id }}" class="govuk-form-group{% if not element.vars.valid %} govuk-form-group--error{% endif %}{% if formGroupClass is defined %} {{ formGroupClass }}{% endif %}">
{% endif %}

    <fieldset class="govuk-fieldset" {% if hintText %}aria-describedby="{{ element.vars.id }}-hint"{% endif %}>
        <legend class="govuk-fieldset__legend">
            {% if labelRaw %}
                {{ labelText | raw }}
            {% else %}
                {{ labelText }}
            {% endif %}
        </legend>

        {% if (hintText is defined) and (hintText is not empty) %}
            <span class="govuk-hint" id="{{ element.vars.id }}-hint">{{ hintText }}</span>
        {% endif %}

        {{ form_errors(element) }}

        {% set class = element.vars.attr.class | default('') ~ ' govuk-checkboxes__input ' ~ inputClass | default('') %}

        {% set labelClass = 'govuk-label govuk-checkboxes__label ' ~ (labelClass is defined ?  labelClass : '') %}
        {% set elementClass = elementClass is defined ?  elementClass : '' %}

        <div class="govuk-checkboxes" {% if labelDataTarget  %} data-target="{{ labelDataTarget }}" {% endif %}>
            <div class="govuk-checkboxes__item">
                {% if element.vars.valid %}
                    {{ form_widget(element, {'attr': {'class': class }}) }}
                {% else %}
                    {{ form_widget(element, {'attr': {'class': class, 'aria-invalid':'true' }}) }}
                {% endif %}
                <label class="{{ labelClass }}" for="{{ element.vars.id }}">
                    {% if labelRaw %}
                        {{ labelText | raw }}
                    {% else %}
                        {{ labelText }}
                    {% endif %}
                </label>
            </div>
        </div>
    </fieldset>

{% if useFormGroup %}
    </div>
{% endif %}
