{# @param report AppBundle\Entity\Report #}
{# @param client AppBundle\Entity\Client #}
{% set translationDomain = "report-overview" %}
{% trans_default_domain translationDomain %}
{% set transOptions = {'%client%': client.firstname | e } %}
{% set sectionId = sectionId | default(null) %}
{% set sectionNeedsAttention = report.isSectionFlaggedForAttention(sectionId) %}

{% if linkToSubSection is not defined %}
    {% set linkToSubSection = path(subSection, {reportId: report.id}) %}
{% endif %}

<li id="{{ subSection }}-section{{ incompleteAppend }}" class="opg-overview-section">
    <a
        id="edit-{{ subSection }}{{ incompleteAppend }}"
        class="opg-overview-section__header {{ sectionNeedsAttention ? ('behat-region-section-' ~ sectionId ~ '-needs-attention opg-overview-section--highlight') : '' }} behat-link-edit-{{ subSection }}"
        href="{{ linkToSubSection }}"
        aria-label="{{ (subSection ~ '.edit') | trans }}"
    >
        {{ (subSection ~ '.subSectionTitle') | trans }}
        <span class="opg-overview-section__status govuk-tag {{ state.state | status_to_tag_css }} behat-region-{{ subSection }}-state-{{ state.state }}">
            {% if state.state == 'done' or customiseAllLabels | default(false) %}
                {{ (subSection ~ '.label.' ~ state.state) | transchoice(state.nOfRecords | default(0)) }}
            {% else %}
                {{ ('labels.' ~ state.state) | trans }}
            {% endif %}
        </span>
    </a>
</li>
